# dialogue

！！！注：以下的例子为生成history set的对话时的例子。对于用于生成query set的prompt，“## 具体要求”有所区别，详见user_prompt.txt

prompt：
````
【System Prompt】
你是一个良好的对话数据生成器，你可以按我的要求为我模拟出适当的用户-助手交互对话。
考虑用户向交互助手询问一些日常建议的场景。用户在当前的情境下可能会面临一些日常需求，需要向交互助手寻求建议；交互助手会尝试根据用户的背景及经历理解用户的需求，并给出对应的解决方案；而用户根据自己的个人偏好，可能会对交互助手提供的建议给出正面或负面的反馈。你需要模拟出用户和助手的上述对话交互过程，并在生成的对话中指明每句话的对话类型。

# 对话类型定义
对话类型("action")包括“用户对话类型”和“助手对话类型”两部分。生成的对话中，每句话均需归属于对应角色下的某一种对话类型中。

## 用户对话类型
"""
- "话题询问"：用户向助手提出自己关于某话题的初始询问，一般较为简短且模糊化。
- "需求确认"：用户对助手的需求推测进行有效回应，确认自己的真实需求。
- "方案讨论"：针对助手给出的方案提议，用户暂不对于方案整体给出明确的正面或负面评价，仅针对其中的细节与助手进行讨论。
- "方案反馈"：用户针对助手提出的方案，表达出明显的正面认同态度或负面否定态度。
"""

## 助手对话类型
"""
- "需求推测"：助手结合了解到的用户背景或相关经历，主动推测用户询问背后的隐式需求。
- "方案提议"：助手根据用户当前话题下的具体需求，为用户提出一个解决方案作为建议。
- "方案讨论"：助手回应用户关于当前方案的意见或询问，结合了解到的用户背景或相关经历与用户进一步讨论该方案，并尝试说服用户接受该方案。
- "反馈回应"：助手对于用户表达出的正面或负面态度进行回应。但需注意，在这里不要尝试给出对话框架中没有指定的其他解决方案。尤其是在用户表达出负面态度的情况下，仅需对用户表示歉意或遗憾即可，不需要尝试为用户推荐其他方案。
"""
【User Prompt】
# 任务输入
我会在输入中给你一个用户的背景、性格、当前情境、对话内容框架，以及预先定义好的对话模板。你需要遵循对话内容框架和对话模板，生成具体的用户-助手对话内容。

## 用户背景
"""
{
    "name": "李晓风",
    "gender": "男",
    "age": 34,
    "occupation": "用户是一名销售经理，负责公司华东地区的业务拓展。他经常需要出差拜访客户，并参加各种行业展会和商务会议。尽管业绩压力较大，但他凭借出色的沟通能力和谈判技巧赢得了不少客户的信任。",
    "health status": "由于长期饮食不规律，用户的胃部健康状况较差，偶尔会出现胃痛症状。此外，频繁的应酬让他体重增加明显，这让他开始关注自己的身体健康。",
    "family members": "用户已婚并有一个5岁的儿子，但夫妻关系较为紧张，常因教育问题产生争执。他的父母住在老家，平时很少联系。",
    "hobbies": "工作占据了大部分时间，用户的业余生活相对单调。偶尔他会去健身房跑步，但这更多是为了缓解身体疲劳而非兴趣驱动。除此之外，他几乎没有其他特别的兴趣爱好。",
}
"""

## 用户性格
"""
{
    "Openness": "medium",
    "Conscientiousness": "high",
    "Extraversion": "high",
    "Agreeableness": "low",
    "Neuroticism": "high"
}
"""

## 用户近期情境
"""
这段时间内，用户的妻子再次提出全家一起旅行的建议，但用户由于工作原因无法抽身参与，这让两人的关系再度紧张。为了避免矛盾升级，他试图通过电话与妻子沟通，解释当前的工作压力，但效果并不理想。与此同时，用户也注意到儿子最近对足球表现出了浓厚的兴趣，这让他萌生了通过亲子活动增进感情的想法。他计划周末带儿子去附近的球场踢球，但由于工作安排临时变动，这个计划迟迟未能实现。面对家庭互动减少的问题，他开始反思如何更好地协调工作与家庭生活。
"""

## 对话框架
以下为json格式的对话框架，共包含1~3个交互话题，第i个话题用键"Ti"表示。每个话题共包含交互主题("topic")，用户需求("requirements")以及回复方案("solutions")三部分。其中，每个交互话题的用户需求中共包含一条用户初始询问（记为"Ti_Q"）和1~2条用户的隐式需求（第j条记为"Ti_Nj"），每条隐式需求中包含具体的需求描述("need")以及作为该需求依据的用户背景经历列表("evidences")。每个交互话题的回复方案中共包含1~3条（第j条记为"Ti_Sj"），其中每个具体的解决方案("solution")均对应一个用户反馈类型("feedback")以及反馈原因("reason")。用户反馈类型分为正向("pos")和负向("neg")两类，"pos"类型的建议符合用户的个性化偏好，"neg"类型的建议则与用户偏好不符，但两类建议都属于一般意义上对于当前需求的恰当解决方案，反馈原因中则体现了用户对于某个方案正向或负向反馈的解释。
"""
{
    "T1": {
        "topic": "用户需要一种能够有效缓解夫妻矛盾的沟通策略，同时希望通过实际行动证明自己对家庭的关注，从而修复夫妻间的信任关系。"
        "requirements": {
            "T1_Q": "如何让另一半理解我的工作压力？",
            "T1_N1": {"need": "希望找到方法缓解夫妻间因旅行计划引发的矛盾", "evidences": ["近期妻子提出全家旅行建议，但用户因工作无法参与，导致双方关系紧张", "用户试图通过电话解释工作压力，但效果不佳"]},
            "T1_N2": {"need": "寻求建立更有效的沟通方式以改善夫妻互动质量", "evidences": ["用户多次尝试与妻子沟通家庭旅行问题，但未能达成一致", "夫妻常因教育问题产生争执，关系较为紧张"]}
        },
        "solutions": {
            "T1_S1": {"solution": "通过写一封真诚的信件或邮件，详细表达你的感受和对家庭的重视，以书面形式弥补沟通不足。", "feedback": "neg", "reason": "用户倾向于实际行动而非仅停留在情感层面的表达，因此书面沟通可能被认为不够直接和有效。"},
            "T1_S2": {"solution": "尝试安排一个轻松的周末晚餐，与妻子面对面交流工作压力和旅行计划的具体困难。", "feedback": "pos", "reason": "用户偏好基于实际行动的解决方案，而周末晚餐提供了一个具体且可行的机会来改善沟通。"}
        }
    },
    "T2": {
        "topic": "用户需要合理调整工作安排，优先兑现与孩子的亲子活动承诺，以实际行动增进父子间的互动质量并弥补之前的遗憾。"
        "requirements": {
            "T1_Q": "怎样才能让孩子感受到我的陪伴？",
            "T1_N1": {"need": "希望兑现承诺，尽快安排与孩子一起踢球的时间", "evidences": ["用户注意到儿子对足球表现出浓厚兴趣，并计划周末踢球，但因工作安排未能实现", "用户向儿子承诺踢球却多次搁置，感到内疚"]}
        },
        "solutions": {
            "T2_S1": {"solution": "在家中设立一个小型足球角，与孩子一起练习基本动作，增加日常陪伴的机会。", "feedback": "neg", "reason": "用户生活单调且无多余精力布置家庭设施，这种需要额外准备的方案可能被认为过于复杂而不切实际。"},
            "T2_S2": {"solution": "制定一个亲子活动计划表，明确标注每周固定的陪伴时间，让孩子感受到你的用心。", "feedback": "neg", "reason": "用户的日程繁忙且经常变动，强制性的时间安排会与他的工作冲突，因此会被视为不可行。"},
            "T2_S3": {"solution": "为孩子准备一份与足球相关的礼物，同时承诺下次一起踢球的时间，以行动弥补遗憾。", "feedback": "pos", "reason": "用户希望通过实际行动弥补对孩子的亏欠，这种结合礼物和承诺的方式既简单又有效。"}
        }
    },
    "T3": {
        "topic": "用户需要一份既能适应其工作时间限制，又能兼顾家庭成员兴趣爱好的短期集体娱乐活动建议，以促进家庭关系和谐发展。"
        "requirements": {
            "T1_Q": "有什么适合全家一起做的有趣事情吗？",
            "T1_N1": {"need": "寻找不需要长时间投入的家庭娱乐活动方案", "evidences": ["用户因工作繁忙难以抽出长时间参与家庭活动", "妻子提议全家旅行，但用户认为当前不适合"]},
            "T1_N2": {"need": "设计能同时满足家庭成员不同兴趣的活动形式", "evidences": ["儿子对足球感兴趣，而用户自身也考虑过踢球作为亲子活动", "用户的妻子倾向于全家旅行，但用户希望找到折中方案"]}
        },
        "solutions": {
            "T3_S1": {"solution": "选择一个附近的公园进行半天的家庭野餐，结合轻松的户外活动增进互动。", "feedback": "neg", "reason": "尽管是短途活动，但野餐准备可能较为繁琐，且无法直接解决家庭中的实质性问题，因此用户可能认为不够高效。"},
            "T3_S2": {"solution": "策划一个家庭问答游戏环节，通过有趣的问题促进成员间的了解和欢笑。", "feedback": "neg", "reason": "问答游戏可能涉及深度情感沟通，容易暴露家庭矛盾，与用户的性格偏好不符。"},
            "T3_S3": {"solution": "利用晚饭后的一小时，在家门口或小区内举办一场小型足球友谊赛，兼顾简单与乐趣。", "feedback": "pos", "reason": "该方案无需额外准备时间，操作简单，还能满足儿子对足球的兴趣，非常适合用户当前情境。"}
        }
    }
}
"""

## 对话模板
以下的对话模板中指明了每轮对话中各句话的对话类型("action")和生成该句话时应该在对话框架中参考的内容("reference")。参考内容的标记共包含{"Ti_Q", "Ti_Nj", "Ti_Sj"}几种类型，具体含义如“对话框架”部分所述。
"""
{
    "turn_1": {
        "user": {"action": "话题询问", "reference": "T1_Q"},
        "assistant": {"action": "需求推测", "reference": "T1_N1"}
    },
    "turn_2": {
        "user": {"action": "需求确认", "reference": "T1_N1"},
        "assistant": {"action": "需求推测", "reference": "T1_N2"}
    },
    "turn_3": {
        "user": {"action": "需求确认", "reference": "T1_N2"},
        "assistant": {"action": "方案提议", "reference": "T1_S1"}
    },
    "turn_4": {
        "user": {"action": "方案讨论", "reference": "T1_S1"},
        "assistant": {"action": "方案讨论", "reference": "T1_S1"}
    },
    "turn_5": {
        "user": {"action": "方案反馈", "reference": "T1_S1"},
        "assistant": {"action": "方案提议", "reference": "T1_S2"}
    },
    "turn_6": {
        "user": {"action": "方案反馈", "reference": "T1_S2"},
        "assistant": {"action": "反馈回应", "reference": "T1_S2"}
    },
    "turn_7": {
        "user": {"action": "话题询问", "reference": "T2_Q"},
        "assistant": {"action": "需求推测", "reference": "T2_N1"}
    },
    "turn_8": {
        "user": {"action": "需求确认", "reference": "T2_N1"},
        "assistant": {"action": "方案提议", "reference": "T2_S1"}
    },
    "turn_9": {
        "user": {"action": "方案反馈", "reference": "T2_S1"},
        "assistant": {"action": "方案提议", "reference": "T2_S2"}
    },
    "turn_10": {
        "user": {"action": "方案反馈", "reference": "T2_S2"},
        "assistant": {"action": "方案提议", "reference": "T2_S3"}
    },
    "turn_11": {
        "user": {"action": "方案反馈", "reference": "T2_S3"},
        "assistant": {"action": "反馈回应", "reference": "T2_S3"}
    },
    "turn_12": {
        "user": {"action": "话题询问", "reference": "T3_Q"},
        "assistant": {"action": "需求推测", "reference": "T3_N1"}
    },
    "turn_13": {
        "user": {"action": "需求确认", "reference": "T3_N1"},
        "assistant": {"action": "需求推测", "reference": "T3_N2"}
    },
    "turn_14": {
        "user": {"action": "需求确认", "reference": "T3_N2"},
        "assistant": {"action": "方案提议", "reference": "T3_S1"}
    },
    "turn_15": {
        "user": {"action": "方案反馈", "reference": "T3_S1"},
        "assistant": {"action": "方案提议", "reference": "T3_S2"}
    },
    "turn_16": {
        "user": {"action": "方案反馈", "reference": "T3_S2"},
        "assistant": {"action": "方案提议", "reference": "T3_S3"}
    },
    "turn_17": {
        "user": {"action": "方案反馈", "reference": "T3_S3"},
        "assistant": {"action": "反馈回应", "reference": "T3_S3"}
    },
}
"""

# 具体要求与输出格式
## 具体要求
1. 需要严格遵循“对话模板”中对于每个轮次指定的对话类型和参考内容进行生成。
2. 假定在生成时，作为助手的角色事先对于用户的近期经历有一定了解，但并不了解用户的总体背景以及偏好。而作为用户的角色则需遵循输入中给出的背景、性格、情境以及偏好。
3. 用户的“话题询问”句子生成时，可以结合上下文对于对话框架中指定的"Ti_Q"内容稍作调整，但不要改变主要语义。
4. 助手的“需求推测”句子生成时，需要参考对话框架中对应的"Ti_Nj"内容，结合其中"evidences"部分提供的用户背景经历，推测"need"部分描述的用户隐式需求，并向用户寻求确认。
5. 助手的“方案提议”句子生成时，在参照对话框架中对应的"Ti_Sj"中"solution"内容的基础上，可以适当调整原来的描述使其更符合该用户的背景和情境，前提是不能完全修改方案。
6. 用户的“方案反馈”句子生成时，需要参照对话框架中对应的"Ti_Sj"中的"feedback"类型和"reason"中所述的原因，简明、直接地表达出自己的诉求或者态度。尤其是在面对交互助手提出的不适当的方案时（即"feedback"为"neg"的情况），用户应当直接表达出自己的负面态度，甚至可以向助手表达出愤怒或不满的情绪。对于不适当的方案，尽量避免让用户生成“听起来很棒，但……”、“看上去不错，但是……”这样过于委婉的表达。
7. 对话中不同语句之间需要尽可能过渡得流畅。例如，如果在一轮对话中指定的用户action为对于上一个方案的“方案反馈”而助手的action为针对新方案的“方案提议”，那么在助手的回复中可以先简单回应用户的反馈，再推荐新方案。不同的话题之间也需要尽可能过渡得流畅，例如在用户生成第二个话题的“话题询问”时，可以包含一些从第一个话题过渡到当前话题的连接词或话语内容。
8. 生成的对话中尽量不要出现“对话框架”中指定方案之外的其他方案，尤其是在用户表达负面态度后，如果当前轮次助手角色指定的对话类型为“反馈回应”而不是“方案提议”，那么仅需对用户表达歉意或遗憾，或询问用户是否存在其他问题，不需要尝试为用户提供额外的建议。
9. 对话中如无必要，不要提及用户的姓名。
10. 除要求的json格式输出外，不要输出任何其它内容，也不需要在json中添加注释进行额外说明。

## 输出格式（json格式）
"""
{
    "turn_1": {
        "user": {"action": "...", "reference": "...", "content": "..."},
        "assistant": {"action": "...", "reference": "...", "content": "..."}
    },
    ...
}
"""

现在，请你按照上述要求和输出格式，给出用户-助手对话的生成结果。
````

效果：
{
    "turn_1": {
        "user": {"action": "话题询问", "reference": "T1_Q", "content": "最近工作压力特别大，我怎么才能让另一半理解我的处境呢？"},
        "assistant": {"action": "需求推测", "reference": "T1_N1", "content": "听起来你可能是因为工作原因无法参与家庭旅行计划，导致夫妻关系有些紧张。是这样吗？"}
    },
    "turn_2": {
        "user": {"action": "需求确认", "reference": "T1_N1", "content": "对，她提议全家旅行，但我实在抽不开身，电话里解释也没用，现在关系更僵了。"},
        "assistant": {"action": "需求推测", "reference": "T1_N2", "content": "看来你们之间不仅是因为旅行计划的问题，平时沟通也可能存在一些障碍，你觉得改善沟通方式会有帮助吗？"}
    },
    "turn_3": {
        "user": {"action": "需求确认", "reference": "T1_N2", "content": "确实，我们经常因为各种事情争执，尤其是孩子的教育问题，沟通总是不顺畅。"},
        "assistant": {"action": "方案提议", "reference": "T1_S1", "content": "或许你可以尝试写一封真诚的信件或邮件，详细表达你的感受和对家庭的重视，这样可以弥补面对面沟通的不足。"}
    },
    "turn_4": {
        "user": {"action": "方案讨论", "reference": "T1_S1", "content": "写信？这会不会显得太正式了？我觉得她更希望看到实际行动，而不是文字上的东西。"},
        "assistant": {"action": "方案讨论", "reference": "T1_S1", "content": "你说得有道理，书面表达可能不够直接。不过这种方式可以让对方冷静下来，重新审视你们的关系，你觉得呢？"}
    },
    "turn_5": {
        "user": {"action": "方案反馈", "reference": "T1_S1", "content": "不行，我觉得这完全没用，甚至可能让她觉得我在敷衍。"},
        "assistant": {"action": "方案提议", "reference": "T1_S2", "content": "那不如试试安排一个轻松的周末晚餐，面对面聊聊工作压力和旅行计划的具体困难，这样可能会更有效。"}
    },
    "turn_6": {
        "user": {"action": "方案反馈", "reference": "T1_S2", "content": "这个主意不错，至少比写信强多了，我可以试试看。"},
        "assistant": {"action": "反馈回应", "reference": "T1_S2", "content": "很高兴你觉得这个建议可行，希望能帮到你！如果还有其他问题，随时告诉我。"}
    },
    "turn_7": {
        "user": {"action": "话题询问", "reference": "T2_Q", "content": "最近我发现儿子对足球很感兴趣，但我不知道怎么让他感受到我的陪伴。"},
        "assistant": {"action": "需求推测", "reference": "T2_N1", "content": "你是不是想兑现之前和孩子一起踢球的承诺，但因为工作安排一直没能实现？"}
    },
    "turn_8": {
        "user": {"action": "需求确认", "reference": "T2_N1", "content": "没错，我答应过他好几次，但总是因为工作搁置，现在觉得很内疚。"},
        "assistant": {"action": "方案提议", "reference": "T2_S1", "content": "或许你可以在家里设立一个小型足球角，和孩子一起练习基本动作，这样能增加日常陪伴的机会。"}
    },
    "turn_9": {
        "user": {"action": "方案反馈", "reference": "T2_S1", "content": "在家里弄足球角？这太麻烦了，我根本没时间准备这些东西。"},
        "assistant": {"action": "方案提议", "reference": "T2_S2", "content": "那制定一个亲子活动计划表怎么样？明确标注每周固定的陪伴时间，让孩子感受到你的用心。"}
    },
    "turn_10": {
        "user": {"action": "方案反馈", "reference": "T2_S2", "content": "计划表听起来也不现实，我的工作日程经常变动，根本没法固定时间。"},
        "assistant": {"action": "方案提议", "reference": "T2_S3", "content": "要不你为孩子准备一份与足球相关的礼物，同时承诺下次一起踢球的时间，这样既简单又能弥补遗憾。"}
    },
    "turn_11": {
        "user": {"action": "方案反馈", "reference": "T2_S3", "content": "这个办法不错，礼物加承诺的方式很实际，我会试试看。"},
        "assistant": {"action": "反馈回应", "reference": "T2_S3", "content": "希望这个方法能让你和孩子的关系更亲近，祝你们玩得开心！"}
    },
    "turn_12": {
        "user": {"action": "话题询问", "reference": "T3_Q", "content": "有没有什么适合全家一起做的有趣事情？"},
        "assistant": {"action": "需求推测", "reference": "T3_N1", "content": "你是不是想找一种不需要长时间投入的家庭娱乐活动，来缓解当前的紧张关系？"}
    },
    "turn_13": {
        "user": {"action": "需求确认", "reference": "T3_N1", "content": "对，我不想花太多时间准备，而且也不想再因为旅行的事情争论。"},
        "assistant": {"action": "需求推测", "reference": "T3_N2", "content": "同时，你也希望找到一种能兼顾家庭成员不同兴趣的活动形式，比如满足儿子对足球的兴趣和妻子的期待，对吧？"}
    },
    "turn_14": {
        "user": {"action": "需求确认", "reference": "T3_N2", "content": "没错，最好是既能让孩子开心，又不会让我太累的活动。"},
        "assistant": {"action": "方案提议", "reference": "T3_S1", "content": "可以选择一个附近的公园进行半天的家庭野餐，结合轻松的户外活动增进互动。"}
    },
    "turn_15": {
        "user": {"action": "方案反馈", "reference": "T3_S1", "content": "野餐准备起来太麻烦了，而且半天对我来说还是有点长。"},
        "assistant": {"action": "方案提议", "reference": "T3_S2", "content": "那策划一个家庭问答游戏环节怎么样？通过有趣的问题促进成员间的了解和欢笑。"}
    },
    "turn_16": {
        "user": {"action": "方案反馈", "reference": "T3_S2", "content": "问答游戏可能反而会暴露家庭矛盾，我觉得不太适合我们家的情况。"},
        "assistant": {"action": "方案提议", "reference": "T3_S3", "content": "利用晚饭后的一小时，在家门口或小区内举办一场小型足球友谊赛，简单又有趣，你觉得如何？"}
    },
    "turn_17": {
        "user": {"action": "方案反馈", "reference": "T3_S3", "content": "这个主意很棒！既不用额外准备，还能让儿子开心，我马上就安排。"},
        "assistant": {"action": "反馈回应", "reference": "T3_S3", "content": "太好了，希望你们能度过一段愉快的时光！如果有需要，随时再联系我。"}
    }
}
````