# evaluate llm (requirement)

## prompt模板：
````
【system prompt】:
你是一个良好的对话评价器。考虑用户与交互助手开展对话交互的场景，在对话中用户针对与自身相关的话题向交互助手寻求建议，交互助手则首先尝试推测用户的需求，随后尝试为用户提供符合其偏好的解决方案。现在给你同一个用户针对同一话题分别与两个不同的交互助手进行的对话，需要你按照我的要求对这两段对话中助手方面的回复效果进行比较和评价。
【user prompt】:
现在给你交互用户("user")的一些个性化信息，包括该用户的背景、性格、近期情境，以及与该用户当前需求相关的详细信息。需要你根据给定的用户个性化信息，判断两个助手("assistant-1"/"assistant-2")各自与用户在交互时，对于用户需求的理解和推测效果。

# 用户个性化信息
## 用户背景
"""
{"name": "李晓风", "gender": "男", "age": 34, "occupation": "用户是一名销售经理，负责公司华东地区的业务拓展。他经常需要出差拜访客户，并参加各种行业展会和商务会议。尽管业绩压力较大，但他凭借出色的沟通能力和谈判技巧赢得了不少客户的信任。", "health status": "由于长期饮食不规律，用户的胃部健康状况较差，偶尔会出现胃痛症状。此外，频繁的应酬让他体重增加明显，这让他开始关注自己的身体健康。", "family members": "用户已婚并有一个5岁的儿子，但夫妻关系较为紧张，常因教育问题产生争执。他的父母住在老家，平时很少联系。", "hobbies": "工作占据了大部分时间，用户的业余生活相对单调。偶尔他会去健身房跑步，但这更多是为了缓解身体疲劳而非兴趣驱动。除此之外，他几乎没有其他特别的兴趣爱好。"}
"""

## 用户性格
"""
{"Openness": "medium", "Conscientiousness": "high", "Extraversion": "high", "Agreeableness": "low", "Neuroticism": "high"}
"""

## 用户近期情境
"""
"年底时，用户兑现了之前的承诺，带全家去郊外度假，这是近一年来第一次真正意义上的家庭旅行。旅途中，用户特别注意饮食选择，避免刺激性食物以防胃部疾病复发，同时也借此机会与妻子深入交流，进一步修复夫妻信任关系。回到家中，他为自己设定了新年目标，包括更规律的生活、更好的家庭关系以及更高的职业成就。为了丰富业余生活，用户还计划明年尝试学习一门乐器，以此培养多元化兴趣爱好。这一切都促使他下定决心，在新的一年里做出更多积极的改变。"
"""

## 用户当前需求
以下是用户当前需求的相关信息，其中"user_query"是用户在对话初始主动向助手询问的内容；"implicit_needs"是用户当前的隐式需求以及相关的用户背景或经历，这部分信息是用户希望助手能够在对话中主动推测出的内容；"requirement"是对上述两部分的总结，即用户当前的实际需求。
"""
{
    "user_query": "最近胃部感觉还好，但我想知道有没有什么办法可以更好地保护胃？",
    "implicit_needs": [
        "{"need": "寻找适合长期执行的健康饮食方案", "evidences": ["用户近期在旅行中特意选择清淡、低刺激性食物", "用户因长期饮食不规律导致胃部健康状况较差"]}",
        "{"need": "建立更规律的生活作息以减轻胃部负担", "evidences": ["用户设定了新年目标，其中包括更规律的生活", "用户频繁出差和应酬，生活作息不稳定"]}"
    ],
    "requirement": "用户希望通过调整饮食结构和改善生活作息来降低胃部疾病复发的风险，并希望获得具体可行的健康管理建议。"
}
"""

# 待评价的对话内容
以下为用户("user")分别与两个交互助手("assistant-1"/"assistant-2")进行交互的对话内容。需要你重点关注助手的回复效果。

## assistant-1
"""
- "user": "最近胃部感觉还好，但我想知道有没有什么办法可以更好地保护胃？"
- "assistant": "听起来您很关心自己的胃部健康，是不是因为最近工作压力大或者经常外出应酬，想找到一些方法来预防胃病的复发呢？"
- "user": "是的，我确实想找到一些方法来预防胃病复发，尤其是长期能坚持的饮食和作息调整。"
- "assistant": "我理解您希望找到一种长期有效的方法来预防胃病复发，可能也希望通过改善饮食和作息习惯来提高整体的生活质量吧？"
- "user": "您说得对，我确实希望通过改善饮食和作息来预防胃病复发，并提高生活质量。"
- "assistant": "您可以尝试每天规律进餐，并减少油腻食物的摄入，同时尽量选择自制健康便当替代外卖，这样既方便又健康。"
- "user": "自制健康便当听起来不错，但我经常出差，根本没时间准备，这方案对我来说不太现实。"
- "assistant": "考虑到您经常出差的情况，建议您可以随身携带一些健康零食，比如坚果混合包或全麦饼干，在无法按时用餐时及时补充能量。"
- "user": "这个建议不错，随身带点健康零食确实能帮我避免饿得太久引发胃痛。"
- "assistant": "很高兴您觉得这个建议有用，随身携带健康零食确实能帮助您更好地照顾自己的胃。"
"""

## assistant-2
"""
- "user": "最近胃部感觉还好，但我想知道有没有什么办法可以更好地保护胃？"
- "assistant": "您是不是最近饮食上比较注意了，比如减少了盐分的摄入？您可能是想了解一些更加具体的饮食习惯来更好地保护您的胃吧？"
- "user": "嗯，确实需要注意饮食，但我更想知道一些适合长期坚持的健康饮食方案，以及如何调整生活作息来保护胃。"
- "assistant": "您可能是希望找到一种既能满足日常营养需求，又不会给胃带来额外负担的饮食方案吧？"
- "user": "对，你说得没错，我确实需要这样的方案。"
- "assistant": "建议您可以尝试采用地中海式饮食，这种饮食方式富含蔬菜、水果、全谷物和健康脂肪，对胃部友好。同时，保持规律的作息时间，避免熬夜，这样有助于减少胃部不适。"
- "user": "地中海式饮食听起来不错，但对我来说操作起来可能有点复杂，我更需要一些简单直接的建议，比如定时进食和避免刺激性食物。"
- "assistant": "定时进食确实很重要，您可以尝试每天在固定时间吃三餐，并且尽量避免辛辣、油腻的食物。此外，细嚼慢咽也有助于减轻胃部负担。"
- "user": "按时吃饭和避免刺激性食物确实很实用，但我还需要一些更具体的建议来应对出差和应酬时的特殊情况。"
- "assistant": "您提到的出差和应酬时的情况确实需要特别注意，我会根据您的需求整理出更加具体的建议。"
"""

# 当前评价维度：需求理解
在每段用户与助手的对话中，对话均围绕着用户的一个需求展开（即“用户当前需求”部分的"requirement"内容），助手和用户的交互过程包含助手对于用户需求的推测以及助手针对用户需求给出解决方案的过程。当前评价中要关注的维度是交互助手的“需求理解”能力，具体说明如下：
1. 你需要重点关注用户个性化信息中的“用户当前需求”部分，判断助手在对话中是否主动推测出了用户未提及的隐式需求以及所对应的情境背景信息。
2. 助手主动推测的内容越具体且越准确，则越应该获得更高的分数；反之如果助手推测的内容较为笼统或不够准确，则应该赋予其较低的分数。
3. 在对话中，用户可能会对一些需求内容进行澄清。在用户澄清之后，助手如果仅仅是简单重复对应的内容，则不应该将这部分内容视为加分项。加分项应体现在助手主动推测出用户尚未提及的内容上。此外，在多轮次的交互中，越早给出较为具体且准确的需求推测内容的助手应被考虑赋予越高的分数。
4. 当前的评价应主要关注对话中助手推测用户需求的部分，根据助手理解用户需求的程度进行评价，无需关注助手关于具体解决方案的方案提议和讨论部分。

# 评价要求及输出模板
## 评价要求
1. 结合输入中提供的用户个性化信息以及用户与两个助手的对话内容，遵循下面的json格式输出模板给出输出。你需要先给出对于两个助手回复效果的分析("analysis")，随后分别为两个助手打分("scores")，分数取值范围为1~10范围内的整数。
2. 在分析("analysis")部分，需要先分别用一段话分析两个助手的对话回复效果，随后给出整体的分析和比较。请注意：两个助手的名称("assistant-1"/"assistant-2")是随机分配给两个具体的交互助手的，即两个助手的出现顺序应该被认为是与助手的回复效果完全无关的，因此请确保避免两个助手的相对顺序对于你评价的影响。
3. 除要求的json格式输出外，不要输出任何其它内容，也不需要在json中添加注释进行额外说明。

## 输出模板
"""
{
    "analysis": { // 先分别用一段话分析两个助手的对话回复效果，随后给出整体的分析和比较
        "assistant-1": "...",
        "assistant-2": "...",
        "overall": "..."
    },
    "scores": { // 分数取值范围：1~10范围内的整数
        "assistant-1": <score>,
        "assistant-2": <score>
    }
}
"""

现在，请你按照评价要求和模板给出评价输出。
````